# Quick Fix Guide - 5 Minute Setup

## üö® What You Need to Do Right Now

Your project is **99% configured** but needs 2 quick fixes to work properly:

---

## ‚úÖ Fix #1: Verify Clerk JWT Issuer Domain (2 minutes)

I've added `CLERK_JWT_ISSUER_DOMAIN` to your `.env.local` with a best guess:
```bash
CLERK_JWT_ISSUER_DOMAIN=https://content-gelding-82.clerk.accounts.dev
```

### Verify it's correct:

1. **Go to Clerk Dashboard**: https://dashboard.clerk.com/
2. **Select your application**
3. **Go to JWT Templates** (in sidebar)
4. **Find or create "convex" template**
5. **Check the Issuer field** - it should match the domain I added

**If it doesn't match**, update line 13 in `.env.local`

### Then add to Convex:

**Option A: Via Dashboard** (Easier)
```
1. Go to https://dashboard.convex.dev/
2. Select: hands-off-your-keyboard
3. Settings ‚Üí Environment Variables
4. Click "Add Environment Variable"
   - Name: CLERK_JWT_ISSUER_DOMAIN
   - Value: https://content-gelding-82.clerk.accounts.dev
5. Save
```

**Option B: Via CLI**
```bash
# First authenticate (if not already)
npx convex dev

# Then in another terminal:
npx convex env set CLERK_JWT_ISSUER_DOMAIN "https://content-gelding-82.clerk.accounts.dev"
```

---

## ‚úÖ Fix #2: Add SERPAPI_KEY to Convex (1 minute)

You added the key to `.env.local` ‚úÖ, but it also needs to be in Convex (for server-side searches).

### Your SERPAPI_KEY:
```
674b4ce6e3f73b4979cd8627a76ea393fec5de98525f9c30cad93f346e6244ee
```

### Add to Convex:

**Option A: Via Dashboard** (Easier)
```
1. Go to https://dashboard.convex.dev/
2. Select: hands-off-your-keyboard
3. Settings ‚Üí Environment Variables
4. Click "Add Environment Variable"
   - Name: SERPAPI_KEY
   - Value: 674b4ce6e3f73b4979cd8627a76ea393fec5de98525f9c30cad93f346e6244ee
5. Save
```

**Option B: Via CLI**
```bash
npx convex env set SERPAPI_KEY "674b4ce6e3f73b4979cd8627a76ea393fec5de98525f9c30cad93f346e6244ee"
```

---

## ‚úÖ Fix #3: Start the Project (30 seconds)

After adding those 2 environment variables to Convex:

```bash
# Kill any running processes (Ctrl+C)

# Then restart
npm run dev
```

**Expected output:**
```
‚úì Convex functions ready
‚úì Ready in X ms at http://localhost:3000
```

---

## üéØ Quick Verification

### Test 1: Convex Connection
```bash
# Should see no errors about CLERK_JWT_ISSUER_DOMAIN
npx convex dev
```

### Test 2: Open the App
```
http://localhost:3000
```

### Test 3: Sign In
- Try signing in with Clerk
- Should work without JWT errors

### Test 4: Search for Products
- Navigate to research page or voice shopper
- Try searching for something (e.g., "laptop")
- Check Convex logs - should see:
  ```
  [SearchProducts] Using SerpAPI for query: "laptop"
  ```

---

## üìã Summary of What's Fixed

| Item | Status | Location |
|------|--------|----------|
| SERPAPI_KEY | ‚úÖ Added to `.env.local` | Done |
| SERPAPI_KEY in Convex | ‚ùå Need to add | **Do this** |
| CLERK_JWT_ISSUER_DOMAIN | ‚úÖ Added to `.env.local` | Done |
| CLERK_JWT_ISSUER_DOMAIN in Convex | ‚ùå Need to add | **Do this** |

---

## üêõ If Something Goes Wrong

### Error: "CLERK_JWT_ISSUER_DOMAIN is not set"
**Fix**: Make sure you added it to both `.env.local` AND Convex environment variables

### Error: "SERPAPI_KEY not found"
**Fix**: Add it to Convex environment variables (not just `.env.local`)

### Error: "Convex authentication failed"
**Fix**: Double-check the CLERK_JWT_ISSUER_DOMAIN matches your Clerk dashboard exactly

### Error: "No products found"
**Fix**: Verify SERPAPI_KEY is in Convex environment variables

---

## üí° Pro Tips

1. **Restart after adding env vars**: Convex needs to be restarted to pick up new environment variables

2. **Check Convex dashboard**: https://dashboard.convex.dev/ ‚Üí Logs to see real-time errors

3. **Check browser console**: Press F12 to see client-side errors

4. **Verify env vars in Convex**:
   ```bash
   npx convex env list
   ```
   Should show both CLERK_JWT_ISSUER_DOMAIN and SERPAPI_KEY

---

## ‚ú® After Everything Works

Your project will have:
- ‚úÖ Full Clerk authentication
- ‚úÖ Real-time product search via SerpAPI
- ‚úÖ Google Gemini AI integration
- ‚úÖ Convex real-time database
- ‚úÖ Voice shopping capabilities (if you set up Pipecat)

---

## üìö Reference Documents

- **Full Diagnostic**: `DIAGNOSTIC_REPORT.md` - Complete analysis
- **SerpAPI Setup**: `SERPAPI_SETUP.md` - Detailed SerpAPI instructions
- **Web Browsing**: `WEB_BROWSING_SETUP_COMPLETE.md` - Multi-API implementation

---

**Total Time**: 5 minutes
**Difficulty**: Easy (just copy-paste)
**Result**: Fully working voice-first shopping app!

---

_Generated by Claude Code Diagnostic System_
_Date: October 17, 2025_
